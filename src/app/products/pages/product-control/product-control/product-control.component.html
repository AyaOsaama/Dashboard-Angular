<div class="container !mx-auto !my-8 !p-8 !bg-white !shadow-xl !rounded-2xl">
  <h2 class="!text-3xl !font-bold !text-gray-800 !mb-10 !border-b !pb-4">Product Control</h2>

  <form (ngSubmit)="saveEdit()" [formGroup]="prodForm" #Form="ngForm" class="grid grid-cols-1 lg:grid-cols-2 gap-10">

    <div class="!space-y-6">
      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Name (EN)</label>
        <input pInputText formControlName="nameEN" placeholder="Product name in English"
          class="!w-full !p-3 !rounded-lg" />
      </div>

      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Name (AR)</label>
        <input pInputText formControlName="nameAR" placeholder="اسم المنتج بالعربية" class="!w-full !p-3 !rounded-lg" />
      </div>

      <div formGroupName="variants" class="!border !p-4 !rounded-md !shadow-sm">
        <h3 class="!text-xl !font-semibold !mb-4">Variant Details</h3>
        <div class="!grid !grid-cols-2 !gap-4">
          <div>
            <label class="!block !text-gray-700 !font-semibold !mb-2">Name (EN)</label>
            <input pInputText formControlName="name.en" placeholder="Variant name in English"
              class="!w-full !p-3 !rounded-lg" />
          </div>

          <div>
            <label class="!block !text-gray-700 !font-semibold !mb-2">Name (AR)</label>
            <input pInputText formControlName="name.ar" placeholder="اسم المنتج بالعربية"
              class="!w-full !p-3 !rounded-lg" />
          </div>

          <div>
            <label class="!block !text-gray-700 !font-semibold !mb-2">Color (EN)</label>
            <input pInputText formControlName="color.en" placeholder="Color in English"
              class="!w-full !p-3 !rounded-lg" />
          </div>

          <div>
            <label class="!block !text-gray-700 !font-semibold !mb-2">Color (AR)</label>
            <input pInputText formControlName="color.ar" placeholder="اللون بالعربية"
              class="!w-full !p-3 !rounded-lg" />
          </div>

          <div class="!grid !grid-cols-2 !gap-4">
            <div>
              <label class="!block !text-gray-700 !font-semibold !mb-2">Price</label>
              <p-inputnumber formControlName="price" mode="currency" currency="USD" class="!w-full !p-2 !rounded-lg" />
            </div>
            <div>
              <label class="!block !text-gray-700 !font-semibold !mb-2">Discount %</label>
              <p-inputnumber formControlName="discount" prefix="%" class="!w-full !p-2 !rounded-lg" />
            </div>
            <div>
              <label class="!block !text-gray-700 !font-semibold !mb-2">Discount Price</label>
              <p-inputnumber formControlName="discountPrice" mode="currency" currency="USD" [disabled]="true"
                class="!w-full !p-2 !rounded-lg" />
            </div>
            <div>
              <label class="!block !text-gray-700 !font-semibold !mb-2">In Stock</label>
              <p-inputnumber formControlName="inStock" mode="decimal" [useGrouping]="false"
                class="!w-full !p-2 !rounded-lg" />
            </div>
          </div>
        </div>
      </div>

      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Description (EN)</label>
        <textarea pInputTextarea formControlName="DescriptionEN" rows="4" placeholder="Description in English"
          class="!w-full !p-3 border !rounded-lg"></textarea>
      </div>

      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Description (AR)</label>
        <textarea pInputTextarea formControlName="DescriptionAR" rows="4" placeholder="الوصف بالعربية"
          class="!w-full !p-3 border !rounded-lg"></textarea>
      </div>

      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Main Image</label>
        <p-fileupload name="image" [customUpload]="true" (onSelect)="onSelectMainImage($event)" accept="image/*"
          maxFileSize="1000000" mode="basic" />
        <div *ngIf="mainImageUrl" class="!mt-3">
          <img [src]="mainImageUrl" class="!w-52 !rounded !shadow-md" />
        </div>
      </div>
    </div>

    <div class="!space-y-6">
      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Brand</label>
        <input pInputText formControlName="brand" placeholder="Brand" class="!w-full !p-3 !rounded-lg" />
      </div>

      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Category</label>
        <p-dropdown [options]="mainCategories" formControlName="mainCategory" optionValue="_id" optionLabel="name"
          placeholder="Select a category" class="w-full md:w-56" (onChange)="onCategoryChange($event)"></p-dropdown>
      </div>


      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Subcategory</label>
        <p-dropdown [options]="filteredSubcategories" formControlName="subCategory" optionValue="_id" optionLabel="name"
          placeholder="Select a subcategory" class="w-full md:w-56"></p-dropdown>
      </div>

      <div class="!grid !grid-cols-2 !gap-4">
        <div>
          <label class="!block !text-gray-700 !font-semibold !mb-2">Material (EN)</label>
          <input pInputText formControlName="materialEN" placeholder="Material in English"
            class="!w-full !p-3 !rounded-lg" />
        </div>

        <div>
          <label class="!block !text-gray-700 !font-semibold !mb-2">Material (AR)</label>
          <input pInputText formControlName="materialAR" placeholder="الخامة بالعربية"
            class="!w-full !p-3 !rounded-lg" />
        </div>

        <div>
          <label class="!block !text-gray-700 !font-semibold !mb-2">Color (EN)</label>
          <input pInputText formControlName="colorEN" placeholder="Color in English" class="!w-full !p-3 !rounded-lg" />
        </div>

        <div>
          <label class="!block !text-gray-700 !font-semibold !mb-2">Color (AR)</label>
          <input pInputText formControlName="colorAR" placeholder="اللون بالعربية" class="!w-full !p-3 !rounded-lg" />
        </div>
      </div>

      <div>
        <label class="!block !text-gray-700 !font-semibold !mb-2">Additional Images</label>
        <p-fileupload name="images[]" [customUpload]="true" (onSelect)="onSelectImages($event)" [multiple]="true"
          accept="image/*" maxFileSize="1000000" mode="advanced" />
        <img *ngFor="let url of imageUrls" [src]="url" class="!w-32 !h-32 !object-cover !rounded !shadow" />
      </div>
    </div>

    <div class="!md:col-span-2 !mt-8 !flex !justify-center">
      <button pButton type="submit" label="Save Changes" icon="pi pi-check"
        class="p-button-success !px-5 !py-3 !text-lg !rounded-md">Save Changes</button>
    </div>
  </form>
</div>