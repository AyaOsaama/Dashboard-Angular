<div class="container mx-auto p-4">
  <div class="flex items-center justify-between mb-4">
    <span class="text-xl font-bold">Sub Categories</span>
    <div class="flex gap-2">
      <p-button label="Add" icon="pi pi-plus" (click)="openAddDialog()" class="p-button-success"></p-button>
      <p-button icon="pi pi-refresh" rounded raised></p-button>
    </div>
  </div>

  <!-- إضافة خانة البحث -->
  <div class="mb-4">
    <input type="text" pInputText placeholder="Search..." [(ngModel)]="searchTerm" style="width: 100%;" />
  </div>

  <p-table [value]="filteredProducts">
    <ng-template pTemplate="header">
      <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Category</th>
        <th>Quantity</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
      <tr>
        <td>{{ product.code }}</td>
        <td>{{ product.name }}</td>
        <td>{{ product.category }}</td>
        <td>{{ produc<div class="container mx-auto p-4">
          <div class="flex items-center justify-between mb-4">
            <span class="text-xl font-bold">Sub Categories</span>
            <div class="flex gap-2">
              <p-button label="Add" icon="pi pi-plus" (click)="openAddDialog()" class="p-button-success"></p-button>
              <p-button icon="pi pi-refresh" rounded raised></p-button>
            </div>
          </div>
        
          <!-- إضافة خانة البحث -->
          <div class="mb-4">
            <input type="text" pInputText placeholder="Search..." [(ngModel)]="searchTerm" style="width: 100%;" />
          </div>
        
          <p-table [value]="filteredProducts">
            <ng-template pTemplate="header">
              <tr>
                <th>Code</th>
                <th>Name</th>
                <th>Category</th>
                <th>Quantity</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product>
              <tr>
                <td>{{ product.code }}</td>
                <td>{{ product.name }}</td>
                <td>{{ product.category }}</td>
                <td>{{ product.quantity }}</td>
              </tr>
            </ng-template>
          </p-table>
        
          <!-- Dialog لإضافة منتج جديد -->
          <p-dialog
            header="Add New Sub Category"
            [(visible)]="addDialogVisible"
            [modal]="true"
            [style]="{ width: '30vw' }"
            [breakpoints]="{ '960px': '75vw', '640px': '90vw' }"
            [draggable]="false"
            [resizable]="false"
            [dismissableMask]="true"
          >
            <div class="p-fluid">
              <div class="p-field">
                <label for="add-code">Code</label>
                <input id="add-code" type="text" pInputText [(ngModel)]="newProduct.code" />
              </div>
              <div class="p-field">
                <label for="add-name">Name</label>
                <input id="add-name" type="text" pInputText [(ngModel)]="newProduct.name" />
              </div>
              <div class="p-field">
                <label for="add-category">Category</label>
                <input id="add-category" type="text" pInputText [(ngModel)]="newProduct.category" />
              </div>
              <div class="p-field">
                <label for="add-quantity">Quantity</label>
                <input id="add-quantity" type="number" pInputText [(ngModel)]="newProduct.quantity" />
              </div>
            </div>
            <ng-template pTemplate="footer">
              <button pButton label="Add" icon="pi pi-check" (click)="addProduct()" class="p-button-success"></button>
              <button pButton label="Cancel" icon="pi pi-times" (click)="addDialogVisible=false" class="p-button-text"></button>
            </ng-template>
          </p-dialog>
        </div>
        t.quantity }}</td>
      </tr>
    </ng-template>
  </p-table>

  <!-- Dialog لإضافة منتج جديد -->
  <p-dialog
    header="Add New Sub Category"
    [(visible)]="addDialogVisible"
    [modal]="true"
    [style]="{ width: '30vw' }"
    [breakpoints]="{ '960px': '75vw', '640px': '90vw' }"
    [draggable]="false"
    [resizable]="false"
    [dismissableMask]="true"
  >
    <div class="p-fluid">
      <div class="p-field">
        <label for="add-code">Code</label>
        <input id="add-code" type="text" pInputText [(ngModel)]="newProduct.code" />
      </div>
      <div class="p-field">
        <label for="add-name">Name</label>
        <input id="add-name" type="text" pInputText [(ngModel)]="newProduct.name" />
      </div>
      <div class="p-field">
        <label for="add-category">Category</label>
        <input id="add-category" type="text" pInputText [(ngModel)]="newProduct.category" />
      </div>
      <div class="p-field">
        <label for="add-quantity">Quantity</label>
        <input id="add-quantity" type="number" pInputText [(ngModel)]="newProduct.quantity" />
      </div>
    </div>
    <ng-template pTemplate="footer">
      <button pButton label="Add" icon="pi pi-check" (click)="addProduct()" class="p-button-success"></button>
      <button pButton label="Cancel" icon="pi pi-times" (click)="addDialogVisible=false" class="p-button-text"></button>
    </ng-template>
  </p-dialog>
</div>
